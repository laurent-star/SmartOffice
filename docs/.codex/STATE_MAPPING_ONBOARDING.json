{
  "meta": {
    "initiative": "mapping_onboarding_hardening",
    "single_pr": true,
    "owner": "codex",
    "updated_at": "2025-12-26T04:05:00Z"
  },
  "discovery": {
    "package_manager": "npm",
    "test_runner": "node:test",
    "mappings_dir": "registries/mappings",
    "scripts": {
      "mapping_lint": "scripts/mapping_lint.js"
    }
  },
  "tasks": [
    {
      "id": "ci_mapping_lint",
      "title": "CI lint automatique des mappings",
      "status": "done",
      "files_expected": [
        ".github/workflows/mapping-lint.yml",
        "scripts/mapping_lint.js"
      ],
      "checks": [
        "Workflow runs on pull_request",
        "Exit non-zero on errors",
        "CI uses non-interactive mode"
      ]
    },
    {
      "id": "samples_json",
      "title": "Samples JSON pour lint interactif",
      "status": "done",
      "files_expected": [
        "samples/monday/payload.example.json",
        "samples/drive/payload.example.json",
        "samples/slack/payload.example.json",
        "samples/gmail/payload.example.json",
        "samples/google-calendar/payload.example.json",
        "samples/google-docs/payload.example.json",
        "samples/google-sheets/payload.example.json",
        "samples/axonaut/payload.example.json",
        "samples/brevo/payload.example.json"
      ],
      "checks": [
        "No real IDs/secrets",
        "Dry-run documented"
      ]
    },
    {
      "id": "unit_tests_mapping_runtime",
      "title": "Tests unitaires mapping runtime",
      "status": "done",
      "files_expected": [
        "tests/mapping/mapping_runtime.test.js"
      ],
      "checks": [
        "Happy path per source",
        "Missing required field",
        "Unknown target"
      ]
    },
    {
      "id": "interactive_lint",
      "title": "Lint interactif avec compl√©tion des mappings",
      "status": "done",
      "files_expected": [
        "scripts/mapping_lint.js"
      ],
      "checks": [
        "--interactive flag supported",
        "Updates mapping file or outputs patch",
        "Non-interactive behavior unchanged",
        "CI does not require TTY"
      ]
    },
    {
      "id": "source_checklists",
      "title": "Checklists par source",
      "status": "done",
      "files_expected": [
        "docs/onboarding/monday.checklist.md",
        "docs/onboarding/drive.checklist.md",
        "docs/onboarding/slack.checklist.md",
        "docs/onboarding/gmail.checklist.md",
        "docs/onboarding/google-calendar.checklist.md",
        "docs/onboarding/google-docs.checklist.md",
        "docs/onboarding/google-sheets.checklist.md",
        "docs/onboarding/axonaut.checklist.md",
        "docs/onboarding/brevo.checklist.md"
      ],
      "checks": [
        "Prereqs + commands + troubleshooting included"
      ]
    },
    {
      "id": "intelligent_onboarding_usecase",
      "title": "Use case onboarding intelligent + sampleFetch tools",
      "status": "done",
      "files_expected": [
        "config/capabilities/onboarding_mapping_intelligent.capability.json",
        "config/use-cases/onboarding_mapping_intelligent.usecase.json",
        "workflows/tools/*.workflow.json"
      ],
      "checks": [
        "sampleFetch present in tool workflows",
        "use case documented",
        "LLM + Slack + Drive flow defined"
      ]
    }
  ],
  "log": [
    {
      "at": null,
      "event": "initialized",
      "details": "State file created; Codex will update statuses and discovery fields as it works."
    },
    {
      "at": "2025-12-26T03:00:13Z",
      "event": "discovery_done",
      "details": "Detected npm with node:test; mappings located in registries/mappings; lint script at scripts/mapping_lint.js"
    },
    {
      "at": "2025-12-26T03:03:15Z",
      "event": "samples_json_done",
      "details": "Added example payloads for monday, drive, slack, gmail, google-calendar, google-docs, google-sheets, axonaut, brevo"
    },
    {
      "at": "2025-12-26T03:03:15Z",
      "event": "unit_tests_mapping_runtime_done",
      "details": "Created node:test suite covering happy paths, missing required validation, and unknown targets"
    },
    {
      "at": "2025-12-26T03:03:15Z",
      "event": "ci_mapping_lint_done",
      "details": "CI workflow added to run mapping lint in --ci mode on pull requests"
    },
    {
      "at": "2025-12-26T03:03:15Z",
      "event": "interactive_lint_done",
      "details": "Extended mapping_lint.js with --ci and --interactive modes with deterministic updates"
    },
    {
      "at": "2025-12-26T03:03:15Z",
      "event": "source_checklists_done",
      "details": "Published onboarding checklists for Monday, Drive, Slack, Gmail, Google Calendar, Google Docs, Google Sheets, Axonaut, Brevo"
    },
    {
      "at": "2025-12-26T03:22:55Z",
      "event": "sources_aligned",
      "details": "Removed HubSpot assets and added Google Sheets sample/checklist to match current tool list"
    },
    {
      "at": "2025-12-26T03:29:00Z",
      "event": "onboarding_client_laure",
      "details": "Onboarding considered complete for Laurent based on current mapping plan and tasks marked done."
    },
    {
      "at": "2025-12-26T03:55:00Z",
      "event": "intelligent_onboarding_ready",
      "details": "Added onboarding_mapping_intelligent use case and sampleFetch action across tool workflows."
    },
    {
      "at": "2025-12-26T04:05:00Z",
      "event": "workflow_naming_convention",
      "details": "Applied so.<layer>.<name> naming convention for all workflows to simplify routing."
    }
  ]
}
