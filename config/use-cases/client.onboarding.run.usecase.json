{
  "id": "client.onboarding.run",
  "version": "1.0.0",
  "description": "Prepare les documents d'onboarding et synchronise le CRM.",
  "inputs": [
    "input.brief",
    "input.schema",
    "context.docs.template_id",
    "context.docs.folder_id",
    "context.monday.board_id",
    "memory.state.client",
    "memory.state.client.company",
    "memory.state.client.contact.email",
    "memory.state.client.contact.name",
    "context.slack.channel"
  ],
  "outputs": [
    "memory.state.document.id",
    "memory.state.client.monday_item_id",
    "memory.state.client.axonaut_company_id",
    "memory.state.notification.message_id"
  ],
  "steps": [
    {
      "id": "docs",
      "type": "usecase",
      "ref": "document.file.generate",
      "params": {
        "brief": "{{input.brief}}",
        "schema": "{{input.schema}}"
      }
    },
    {
      "id": "crm",
      "type": "usecase",
      "ref": "crm.client.sync",
      "params": {}
    },
    {
      "id": "notify",
      "type": "capability",
      "ref": "notification.message.send",
      "params": {
        "message": "Dossier d'onboarding genere"
      }
    }
  ]
}
