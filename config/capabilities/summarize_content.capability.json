{
  "id": "summarize_content",
  "version": "1.0.0",
  "description": "Produit un résumé exploitable d'un contenu textuel et le partage si nécessaire.",
  "inputs": [
    "memory.state.content.raw",
    "context.slack.summary_channel"
  ],
  "outputs": [
    "memory.state.content.summary"
  ],
  "steps": [
    {
      "id": "summarize",
      "type": "tool",
      "ref": "openai",
      "params": {
        "action": "text.generateChatCompletion",
        "text": "{{memory.state.content.raw}}"
      },
      "save": {
        "to": {
          "memory.state.content.summary": "$.data.summary"
        }
      }
    },
    {
      "id": "share_summary",
      "type": "tool",
      "ref": "slack",
      "when": "context.slack.summary_channel != null",
      "params": {
        "action": "message.send",
        "channel": "{{context.slack.summary_channel}}",
        "text": "Résumé généré : {{memory.state.content.summary}}"
      }
    }
  ]
}
